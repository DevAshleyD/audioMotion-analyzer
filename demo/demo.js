!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i,o,a,r,d,l,c,h,s,u,f,m,g,p,w,v,b,x,y,M,S,E,k,L,I,F,q,R,B,H,C,A,P;n.r(t);var T={classic:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )",{pos:.6,color:"hsl( 60, 100%, 50% )"},"hsl( 120, 100%, 50% )"]},prism:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )"]},rainbow:{bgColor:"#111",dir:"h",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )","hsl( 300, 100%, 50% )","hsl( 360, 100%, 50% )"]}},V={mode:0,fftSize:8192,minFreq:20,maxFreq:22e3,smoothing:.5,gradient:"classic",showBgColor:!0,showLeds:!1,showScale:!0,highSens:!1,showPeaks:!0,showFPS:!1,loRes:!1,width:640,height:270};function _(){return document.fullscreenElement===M}function z(){return void 0!==R}function O(e=-85,t=-25){!0===e?(x.minDecibels=-100,x.maxDecibels=-30):!1===e?(x.minDecibels=-85,x.maxDecibels=-25):(x.minDecibels=Math.min(e,t),x.maxDecibels=Math.max(e,t))}function j(){var e,t;if(g=Math.log10(o),p=M.width/(Math.log10(a)-g),m=[],0==i){w=1;var n,r=-1,d=Math.floor(o*x.fftSize/b.sampleRate),l=Math.round(a*x.fftSize/b.sampleRate);for(e=d;e<=l;e++)t=e*b.sampleRate/x.fftSize,(n=Math.round(p*(Math.log10(t)-g)))>r?(m.push({posX:n,dataIdx:e,endIdx:0,average:!1,peak:0,hold:0,accel:0}),r=n):m.length&&(m[m.length-1].endIdx=e)}else{var c;switch(i){case 24:c=Math.min(16,M.height/(33*E)|0),v={nLeds:Math.min(24,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(24,M.width/(40*E)|0)};break;case 12:c=Math.min(8,M.height/(67*E)|0),v={nLeds:Math.min(48,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(16,M.width/(60*E)|0)};break;case 8:c=Math.min(6,M.height/(90*E)|0),v={nLeds:Math.min(64,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(10,M.width/(96*E)|0)};break;case 4:c=Math.min(6,M.height/(90*E)|0),v={nLeds:Math.min(80,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(8,M.width/(120*E)|0)};break;case 2:c=Math.min(4,M.height/(135*E)|0),v={nLeds:Math.min(128,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(4,M.width/(240*E)|0)};break;default:c=Math.min(3,Math.max(2,M.height/(180*E)|0)),v={nLeds:Math.min(128,M.height/(2*c*E)|0),spaceV:c,spaceH:Math.min(4,M.width/(320*E)|0)}}v.spaceH*=E,v.spaceV*=E,v.ledHeight=M.height/v.nLeds-v.spaceV;var h=[],s=0;for(e=0;(t=16.351597831287403*(2**(1/24))**e)<=a;)t>=o&&e%i==0&&h.push(t),e++;w=Math.floor(M.width/h.length)-1;var u=Math.round(M.width-w*h.length)/(h.length-1);H.width|=0,h.forEach(function(e,t){var n,i,o=Math.round(e*x.fftSize/b.sampleRate),a=!1;n=s>0&&s+1<=o?s+1:o,s=i=o,void 0!==h[t+1]&&((i=Math.round(h[t+1]*x.fftSize/b.sampleRate))-o>1?s+=Math.round((i-o)/2):i-o==1&&m.length>0&&n==m[m.length-1].dataIdx&&(a=!0,s+=Math.round((i-o)/2))),m.push({posX:t*(w+u),dataIdx:n,endIdx:s-n>0?s:0,average:a,peak:0,hold:0,accel:0}),C.fillRect(m[m.length-1].posX-v.spaceH/2,0,v.spaceH,M.height)})}if(i>0)for(C.fillRect(m[m.length-1].posX+w-v.spaceH/2+(i<8?2:1),0,v.spaceH,M.height),e=v.ledHeight;e<M.height;e+=v.ledHeight+v.spaceV)C.fillRect(0,e,M.width,v.spaceV);D()}function D(){var e=5*E;_()&&(e*=2),S.fillStyle="#000c",S.fillRect(0,M.height-4*e,M.width,4*e),c&&(S.fillStyle="#fff",S.font=2*e+"px sans-serif",S.textAlign="center",[16,31,63,125,250,500,1e3,2e3,4e3,8e3,16e3].forEach(function(t){var n=p*(Math.log10(t)-g);S.fillText(t>=1e3?t/1e3+"k":t,n,M.height-e)}))}function X(){var e,t,n,o=l&&i>0;S.fillStyle=d?o?"#111":T[r].bgColor:"#000",S.fillRect(0,0,M.width,M.height),x.getByteFrequencyData(y),e=m.length;for(let i=0;i<e;i++){if(0==(t=m[i]).endIdx)n=y[t.dataIdx];else if(n=0,t.average){for(let e=t.dataIdx;e<=t.endIdx;e++)n+=y[e];n/=t.endIdx-t.dataIdx+1}else for(let e=t.dataIdx;e<=t.endIdx;e++)n=Math.max(n,y[e]);(n=o?(n/255*v.nLeds|0)*(v.ledHeight+v.spaceV):n/255*M.height|0)>=t.peak&&(t.peak=n,t.hold=30,t.accel=0),S.fillStyle=T[r].gradient,o?S.fillRect(t.posX+v.spaceH/2,M.height,w,-n):S.fillRect(t.posX,M.height,w,-n),t.peak>0&&(h&&(o?S.fillRect(t.posX+v.spaceH/2,(v.nLeds-(t.peak/M.height*v.nLeds|0))*(v.ledHeight+v.spaceV),w,v.ledHeight):S.fillRect(t.posX,M.height-t.peak,w,2)),t.hold?t.hold--:(t.accel++,t.peak-=t.accel))}o&&S.drawImage(H,0,0),c&&D(),P++;let a=performance.now(),s=a-A;if(s>=1e3&&(q=P/(s/1e3),P=0,A=a),f){let e=20*E;S.font=`bold ${e}px sans-serif`,S.fillStyle="#0f0",S.textAlign="right",S.fillText(q.toFixed(),M.width-e,2*e)}B&&B(M,S,E),R=requestAnimationFrame(X)}function $(){var e;Object.keys(T).forEach(function(t){e=T[t].dir&&"h"==T[t].dir?S.createLinearGradient(0,0,M.width,0):S.createLinearGradient(0,0,0,M.height),T[t].colorStops&&T[t].colorStops.forEach((n,i)=>{"object"==typeof n?e.addColorStop(n.pos,n.color):e.addColorStop(i/(T[t].colorStops.length-1),n)}),T[t].gradient=e})}function G(){E=window.devicePixelRatio,u&&(E/=2),I=Math.max(window.screen.width,window.screen.height)*E,F=Math.min(window.screen.height,window.screen.width)*E,_()?(M.width=I,M.height=F):(M.width=k*E,M.height=L*E),2==E&&window.screen.height<=540&&(E=1),S.fillStyle="#000",S.fillRect(0,0,M.width,M.height),$(),H=M.cloneNode(),(C=H.getContext("2d")).fillStyle="#000",j()}function N(e){var t=z();return void 0===e&&(e=!t),t&&!e?(cancelAnimationFrame(R),R=void 0):!t&&e&&(P=q=0,A=performance.now(),R=requestAnimationFrame(X)),z()}var W=document.getElementById("audio"),U=!0;try{!function(e,t={}){e||(e=document.body);var n,m=window.AudioContext||window.webkitAudioContext;try{b=new m}catch(e){throw"Could not create audio context. Web Audio API not supported?"}x=b.createAnalyser(),t.source&&(n=function(e){var t=b.createMediaElementSource(e);return t.connect(x),t}(t.source)),x.connect(b.destination),V.width=e.clientWidth||V.width,V.height=e.clientHeight||V.height,i=void 0===t.mode?V.mode:Number(t.mode),o=void 0===t.minFreq?V.minFreq:t.minFreq,a=void 0===t.maxFreq?V.maxFreq:t.maxFreq,r=void 0===t.gradient?V.gradient:t.gradient,d=void 0===t.showBgColor?V.showBgColor:t.showBgColor,l=void 0===t.showLeds?V.showLeds:t.showLeds,c=void 0===t.showScale?V.showScale:t.showScale,s=void 0===t.highSens?V.highSens:t.highSens,h=void 0===t.showPeaks?V.showPeaks:t.showPeaks,f=void 0===t.showFPS?V.showFPS:t.showFPS,u=void 0===t.loRes?V.loRes:t.loRes,k=void 0===t.width?V.width:t.width,L=void 0===t.height?V.height:t.height,x.fftSize=void 0===t.fftSize?V.fftSize:t.fftSize,x.smoothingTimeConstant=void 0===t.smoothing?V.smoothing:t.smoothing,y=new Uint8Array(x.frequencyBinCount),"function"==typeof t.drawCallback&&(B=t.drawCallback),O(s),(M=document.createElement("canvas")).style="max-width: 100%;",e.appendChild(M),S=M.getContext("2d",{alpha:!1}),G(),M.addEventListener("fullscreenchange",G),window.addEventListener("resize",()=>{k=t.width||e.clientWidth||V.width,L=t.height||e.clientHeight||V.height,G()}),void 0!==t.start&&!1===t.start||N(!0)}(document.getElementById("container"),{mode:4,source:W,minFreq:30,maxFreq:16e3,showFPS:!0,drawCallback:function(e,t,n){if(!U)return;var i=20*n;_()&&(i*=2);t.font=`${i}px Orbitron,sans-serif`;var o=t.measureText("audioMotion").width/2;t.font=`${i+y[1]/16*n}px Orbitron,sans-serif`,t.fillStyle="#fff8",t.textAlign="center",t.fillText("audioMotion",e.width-o-4*i,2*i)}})}catch(e){document.getElementById("container").innerHTML=`<p>audioMotion failed with error: <em>${e}</em></p>`}var J=b,K=J.createOscillator(),Q=J.createGain();K.frequency.setValueAtTime(0,J.currentTime),K.connect(Q),K.start(),Q.connect(x),document.getElementById("btn_fullscr").addEventListener("click",()=>void(_()?document.exitFullscreen():M.requestFullscreen?M.requestFullscreen():M.webkitRequestFullscreen?M.webkitRequestFullscreen():M.mozRequestFullScreen?M.mozRequestFullScreen():M.msRequestFullscreen&&M.msRequestFullscreen())),document.getElementById("btn_bgcolor").addEventListener("click",()=>(function(e){return d=void 0===e?!d:e})()),document.getElementById("btn_peaks").addEventListener("click",()=>(function(e){return h=void 0===e?!h:e})()),document.getElementById("btn_leds").addEventListener("click",()=>(function(e){return l=void 0===e?!l:e})()),document.getElementById("btn_scale").addEventListener("click",()=>(function(e){return c=void 0===e?!c:e})()),document.getElementById("btn_lores").addEventListener("click",()=>(function(e){return u=void 0===e?!u:e,G(),u})()),document.getElementById("btn_fps").addEventListener("click",()=>(function(e){return f=void 0===e?!f:e})()),document.getElementById("btn_logo").addEventListener("click",()=>U=!U),document.getElementById("btn_freeze").addEventListener("click",()=>N()),document.getElementById("mode").addEventListener("change",e=>(function(e=V.mode){i=Number(e),j()})(e.target.value)),document.getElementById("gradient").addEventListener("change",e=>(function(e=V.gradient){r=e})(e.target.value)),document.getElementById("range").addEventListener("change",e=>{let t=e.target[e.target.selectedIndex];!function(e=V.minFreq,t=V.maxFreq){o=Math.min(e,t),a=Math.max(e,t),j()}(t.dataset.min,t.dataset.max)}),document.querySelectorAll(".tones").forEach(e=>e.addEventListener("click",e=>{K.type=e.target.dataset.wave,K.frequency.setValueAtTime(e.target.dataset.freq,J.currentTime),Q.gain.setValueAtTime(.2,J.currentTime)})),document.getElementById("btn_soundoff").addEventListener("click",()=>Q.gain.setValueAtTime(0,J.currentTime)),document.getElementById("uploadFile").addEventListener("change",e=>(function(e){var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=()=>{W.src=t.result,W.play()}})(e.target))}]);