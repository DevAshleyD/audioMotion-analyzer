!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";
/**
 * audioMotion-analyzer.js
 * High-resolution real-time graphic audio spectrum analyzer JS module
 *
 * https://github.com/hvianna/audioMotion.js
 *
 * @author    Henrique Vianna <hvianna@gmail.com>
 * @copyright (c) 2018-2019 Henrique Avila Vianna
 * @license   AGPL-3.0-or-later
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */
var i,o,a,r,d,l,c,s,h,u,f,m,g,w,p,v,b,x,y,E,k,M,S,q,L,I,F,R,B,C,H,D;n.r(t);var A={classic:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )",{pos:.6,color:"hsl( 60, 100%, 50% )"},"hsl( 120, 100%, 50% )"]},prism:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )"]},rainbow:{bgColor:"#111",dir:"h",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )","hsl( 300, 100%, 50% )","hsl( 360, 100%, 50% )"]}},P={mode:0,fftSize:8192,minFreq:20,maxFreq:22e3,smoothing:.5,gradient:"classic",minDb:-85,maxDb:-25,showBgColor:!0,showLeds:!1,showScale:!0,showPeaks:!0,showFPS:!1,loRes:!1,width:640,height:270};function T(){return document.fullscreenElement?document.fullscreenElement===x:document.webkitFullscreenElement?document.webkitFullscreenElement===x:void 0}function _(){return void 0!==I}function z(e=P.minDb,t=P.maxDb){v.minDecibels=Math.min(e,t),v.maxDecibels=Math.max(e,t)}function O(){var e,t,n=Math.log10(o),r=x.width/(Math.log10(a)-n);if(f=[],0==i){m=1;var d,l=-1,c=Math.floor(o*v.fftSize/p.sampleRate),s=Math.min(Math.round(a*v.fftSize/p.sampleRate),v.frequencyBinCount-1);for(e=c;e<=s;e++)t=e*p.sampleRate/v.fftSize,(d=Math.round(r*(Math.log10(t)-n)))>l?(f.push({posX:d,dataIdx:e,endIdx:0,average:!1,peak:0,hold:0,accel:0}),l=d):f.length&&(f[f.length-1].endIdx=e)}else{var h;switch(i){case 24:h=Math.min(16,x.height/(33*E)|0),g={nLeds:24,spaceH:Math.min(24,x.width/(40*E)|0)};break;case 12:h=Math.min(8,x.height/(67*E)|0),g={nLeds:48,spaceH:Math.min(16,x.width/(60*E)|0)};break;case 8:h=Math.min(6,x.height/(90*E)|0),g={nLeds:64,spaceH:Math.min(10,x.width/(96*E)|0)};break;case 4:h=Math.min(6,x.height/(90*E)|0),g={nLeds:80,spaceH:Math.min(8,x.width/(120*E)|0)};break;case 2:h=Math.min(4,x.height/(135*E)|0),g={nLeds:128,spaceH:Math.min(4,x.width/(240*E)|0)};break;default:h=Math.min(3,Math.max(2,x.height/(180*E)|0)),g={nLeds:128,spaceH:Math.min(4,x.width/(320*E)|0)}}g.spaceH*=E,g.spaceV=h*E,g.nLeds=Math.min(g.nLeds,x.height/(2*g.spaceV)|0),g.ledHeight=x.height/g.nLeds-g.spaceV;var u=[],b=0;for(e=0;(t=16.351597831287403*(2**(1/24))**e)<=a;)t>=o&&e%i==0&&u.push(t),e++;m=Math.floor(x.width/u.length)-1;var y=(x.width-m*u.length)/(u.length-1);R.width|=0,u.forEach(function(e,t){var n,i,o=Math.round(e*v.fftSize/p.sampleRate),a=!1;n=b>0&&b+1<=o?b+1:o,b=i=o,void 0!==u[t+1]&&((i=Math.round(u[t+1]*v.fftSize/p.sampleRate))-o>1?b+=Math.round((i-o)/2):i-o==1&&f.length>0&&n==f[f.length-1].dataIdx&&(a=!0,b+=Math.round((i-o)/2))),f.push({posX:t*(m+y),dataIdx:n,endIdx:b-n>0?b:0,average:a,peak:0,hold:0,accel:0}),B.fillRect(f[f.length-1].posX-g.spaceH/2,0,g.spaceH,x.height)})}if(i>0)for(B.fillRect(f[f.length-1].posX+m-g.spaceH/2+(i<8?2:1),0,g.spaceH,x.height),e=g.ledHeight;e<x.height;e+=g.ledHeight+g.spaceV)B.fillRect(0,e,x.width,g.spaceV);(w=[{freq:16},{freq:31},{freq:63},{freq:125},{freq:250},{freq:500},{freq:1e3},{freq:2e3},{freq:4e3},{freq:8e3},{freq:16e3}]).forEach(e=>{e.posX=r*(Math.log10(e.freq)-n),e.freq>=1e3&&(e.freq=e.freq/1e3+"k")})}function V(){var e,t,n,o,a,h,p=l&&i>0;for(y.fillStyle=d?p?"#111":A[r].bgColor:"#000",y.fillRect(0,0,x.width,x.height),v.getByteFrequencyData(b),n=f.length,e=0;e<n;e++){if(0==(o=f[e]).endIdx)a=b[o.dataIdx];else if(a=0,o.average){for(t=o.dataIdx;t<=o.endIdx;t++)a+=b[t];a/=o.endIdx-o.dataIdx+1}else for(t=o.dataIdx;t<=o.endIdx;t++)a=Math.max(a,b[t]);(a=p?(a/255*g.nLeds|0)*(g.ledHeight+g.spaceV):a/255*x.height|0)>=o.peak&&(o.peak=a,o.hold=30,o.accel=0),y.fillStyle=A[r].gradient,p?y.fillRect(o.posX+g.spaceH/2,x.height,m,-a):y.fillRect(o.posX,x.height,m,-a),o.peak>0&&(s&&(p?y.fillRect(o.posX+g.spaceH/2,(g.nLeds-(o.peak/x.height*g.nLeds|0))*(g.ledHeight+g.spaceV),m,g.ledHeight):y.fillRect(o.posX,x.height-o.peak,m,2)),o.hold?o.hold--:(o.accel++,o.peak-=o.accel))}p&&y.drawImage(R,0,0),c&&(h=5*E,T()&&(h*=2),y.fillStyle="#000c",y.fillRect(0,x.height-4*h,x.width,4*h),y.fillStyle="#fff",y.font=2*h+"px sans-serif",y.textAlign="center",w.forEach(e=>y.fillText(e.freq,e.posX,x.height-h))),H++;var k=performance.now(),M=k-C;M>=1e3&&(L=H/(M/1e3),H=0,C=k),u&&(h=20*E,y.font=`bold ${h}px sans-serif`,y.fillStyle="#0f0",y.textAlign="right",y.fillText(L.toFixed(),x.width-h,2*h)),F&&F(x,y,E),I=requestAnimationFrame(V)}function X(){var e;Object.keys(A).forEach(function(t){e=A[t].dir&&"h"==A[t].dir?y.createLinearGradient(0,0,x.width,0):y.createLinearGradient(0,0,0,x.height),A[t].colorStops&&A[t].colorStops.forEach((n,i)=>{"object"==typeof n?e.addColorStop(n.pos,n.color):e.addColorStop(i/(A[t].colorStops.length-1),n)}),A[t].gradient=e})}function j(e){E=window.devicePixelRatio,h&&(E/=2),S=Math.max(window.screen.width,window.screen.height)*E,q=Math.min(window.screen.height,window.screen.width)*E,T()?(x.width=S,x.height=q):(x.width=k*E,x.height=M*E),2==E&&window.screen.height<=540&&(E=1),y.fillStyle="#000",y.fillRect(0,0,x.width,x.height),X(),R=x.cloneNode(),(B=R.getContext("2d")).fillStyle="#000",O(),D&&D(e,x.width,x.height,T(),h,E)}function $(e){var t=_();return void 0===e&&(e=!t),t&&!e?(cancelAnimationFrame(I),I=void 0):!t&&e&&(H=L=0,C=performance.now(),I=requestAnimationFrame(V)),_()}var G=document.getElementById("audio"),N=!0;try{!function(e,t={}){e||(e=document.body);var n,f=window.AudioContext||window.webkitAudioContext;try{p=new f}catch(e){throw"Could not create audio context. Web Audio API not supported?"}v=p.createAnalyser(),t.source&&(n=function(e){var t=p.createMediaElementSource(e);return t.connect(v),t}(t.source)),v.connect(p.destination),P.width=e.clientWidth||P.width,P.height=e.clientHeight||P.height,i=void 0===t.mode?P.mode:Number(t.mode),o=void 0===t.minFreq?P.minFreq:t.minFreq,a=void 0===t.maxFreq?P.maxFreq:t.maxFreq,r=void 0===t.gradient?P.gradient:t.gradient,d=void 0===t.showBgColor?P.showBgColor:t.showBgColor,l=void 0===t.showLeds?P.showLeds:t.showLeds,c=void 0===t.showScale?P.showScale:t.showScale,s=void 0===t.showPeaks?P.showPeaks:t.showPeaks,u=void 0===t.showFPS?P.showFPS:t.showFPS,h=void 0===t.loRes?P.loRes:t.loRes,k=void 0===t.width?P.width:t.width,M=void 0===t.height?P.height:t.height,v.fftSize=void 0===t.fftSize?P.fftSize:t.fftSize,v.smoothingTimeConstant=void 0===t.smoothing?P.smoothing:t.smoothing,v.minDecibels=void 0===t.minDb?P.minDb:t.minDb,v.maxDecibels=void 0===t.maxDb?P.maxDb:t.maxDb,b=new Uint8Array(v.frequencyBinCount),"function"==typeof t.onCanvasDraw&&(F=t.onCanvasDraw),"function"==typeof t.onCanvasResize&&(D=t.onCanvasResize),(x=document.createElement("canvas")).style="max-width: 100%;",e.appendChild(x),y=x.getContext("2d",{alpha:!1}),j("create"),window.addEventListener("resize",()=>{k=t.width||e.clientWidth||P.width,M=t.height||e.clientHeight||P.height,j("resize")}),void 0!==t.start&&!1===t.start||$(!0)}(document.getElementById("container"),{mode:4,source:G,minFreq:30,maxFreq:16e3,showFPS:!0,onCanvasDraw:function(e,t,n){if(!N)return;var i=20*n;T()&&(i*=2);t.font=`${i}px Orbitron,sans-serif`;var o=t.measureText("audioMotion").width/2;t.font=`${i+b[1]/16*n}px Orbitron,sans-serif`,t.fillStyle="#fff8",t.textAlign="center",t.fillText("audioMotion",e.width-o-4*i,2*i)}})}catch(e){document.getElementById("container").innerHTML=`<p>audioMotion failed with error: <em>${e}</em></p>`}var W=p,U=W.createOscillator(),J=W.createGain();U.frequency.setValueAtTime(0,W.currentTime),U.connect(J),U.start(),J.connect(v),document.getElementById("btn_fullscr").addEventListener("click",()=>void(T()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():x.requestFullscreen?x.requestFullscreen():x.webkitRequestFullscreen&&x.webkitRequestFullscreen())),document.getElementById("btn_bgcolor").addEventListener("click",()=>(function(e){return d=void 0===e?!d:e})()),document.getElementById("btn_peaks").addEventListener("click",()=>(function(e){return s=void 0===e?!s:e})()),document.getElementById("btn_leds").addEventListener("click",()=>(function(e){return l=void 0===e?!l:e})()),document.getElementById("btn_scale").addEventListener("click",()=>(function(e){return c=void 0===e?!c:e})()),document.getElementById("btn_lores").addEventListener("click",()=>(function(e){return h=void 0===e?!h:e,j("lores"),h})()),document.getElementById("btn_fps").addEventListener("click",()=>(function(e){return u=void 0===e?!u:e})()),document.getElementById("btn_logo").addEventListener("click",()=>N=!N),document.getElementById("btn_freeze").addEventListener("click",()=>$()),document.getElementById("sensitivity").addEventListener("change",e=>{switch(e.target.value){case"0":z(-70,-10);break;case"1":z(-80,-20);break;case"2":z(-85,-25);break;case"3":z(-90,-30);break;case"4":z(-100,-40)}}),document.getElementById("mode").addEventListener("change",e=>(function(e=P.mode){i=Number(e),O()})(e.target.value)),document.getElementById("gradient").addEventListener("change",e=>(function(e=P.gradient){r=e})(e.target.value)),document.getElementById("range").addEventListener("change",e=>{let t=e.target[e.target.selectedIndex];!function(e=P.minFreq,t=P.maxFreq){o=Math.min(e,t),a=Math.max(e,t),O()}(t.dataset.min,t.dataset.max)}),document.querySelectorAll(".tones").forEach(e=>e.addEventListener("click",e=>{U.type=e.target.dataset.wave,U.frequency.setValueAtTime(e.target.dataset.freq,W.currentTime),J.gain.setValueAtTime(.2,W.currentTime)})),document.getElementById("btn_soundoff").addEventListener("click",()=>J.gain.setValueAtTime(0,W.currentTime)),document.getElementById("uploadFile").addEventListener("change",e=>(function(e){var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=()=>{G.src=t.result,G.play()}})(e.target)),window.addEventListener("click",()=>{"suspended"==p.state&&p.resume()})}]);