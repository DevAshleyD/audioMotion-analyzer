!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i,o,a,r,d,l,c,s,h,u,f,m,g,w,p,v,b,x,y,E,S,k,M,q,L,F,I,B,R,C,H,A;n.r(t);var P={classic:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )",{pos:.6,color:"hsl( 60, 100%, 50% )"},"hsl( 120, 100%, 50% )"]},prism:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )"]},rainbow:{bgColor:"#111",dir:"h",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )","hsl( 300, 100%, 50% )","hsl( 360, 100%, 50% )"]}},T={mode:0,fftSize:8192,minFreq:20,maxFreq:22e3,smoothing:.5,gradient:"classic",showBgColor:!0,showLeds:!1,showScale:!0,highSens:!1,showPeaks:!0,showFPS:!1,loRes:!1,width:640,height:270};function _(){return document.fullscreenElement?document.fullscreenElement===y:document.webkitFullscreenElement?document.webkitFullscreenElement===y:void 0}function z(){return void 0!==I}function O(e=-85,t=-25){!0===e?(b.minDecibels=-100,b.maxDecibels=-30):!1===e?(b.minDecibels=-85,b.maxDecibels=-25):(b.minDecibels=Math.min(e,t),b.maxDecibels=Math.max(e,t))}function V(){var e,t,n=Math.log10(o),r=y.width/(Math.log10(a)-n);if(m=[],0==i){g=1;var d,l=-1,c=Math.floor(o*b.fftSize/v.sampleRate),s=Math.min(Math.round(a*b.fftSize/v.sampleRate),b.frequencyBinCount-1);for(e=c;e<=s;e++)t=e*v.sampleRate/b.fftSize,(d=Math.round(r*(Math.log10(t)-n)))>l?(m.push({posX:d,dataIdx:e,endIdx:0,average:!1,peak:0,hold:0,accel:0}),l=d):m.length&&(m[m.length-1].endIdx=e)}else{var h;switch(i){case 24:h=Math.min(16,y.height/(33*S)|0),w={nLeds:24,spaceH:Math.min(24,y.width/(40*S)|0)};break;case 12:h=Math.min(8,y.height/(67*S)|0),w={nLeds:48,spaceH:Math.min(16,y.width/(60*S)|0)};break;case 8:h=Math.min(6,y.height/(90*S)|0),w={nLeds:64,spaceH:Math.min(10,y.width/(96*S)|0)};break;case 4:h=Math.min(6,y.height/(90*S)|0),w={nLeds:80,spaceH:Math.min(8,y.width/(120*S)|0)};break;case 2:h=Math.min(4,y.height/(135*S)|0),w={nLeds:128,spaceH:Math.min(4,y.width/(240*S)|0)};break;default:h=Math.min(3,Math.max(2,y.height/(180*S)|0)),w={nLeds:128,spaceH:Math.min(4,y.width/(320*S)|0)}}w.spaceH*=S,w.spaceV=h*S,w.nLeds=Math.min(w.nLeds,y.height/(2*w.spaceV)|0),w.ledHeight=y.height/w.nLeds-w.spaceV;var u=[],f=0;for(e=0;(t=16.351597831287403*(2**(1/24))**e)<=a;)t>=o&&e%i==0&&u.push(t),e++;g=Math.floor(y.width/u.length)-1;var x=(y.width-g*u.length)/(u.length-1);R.width|=0,u.forEach(function(e,t){var n,i,o=Math.round(e*b.fftSize/v.sampleRate),a=!1;n=f>0&&f+1<=o?f+1:o,f=i=o,void 0!==u[t+1]&&((i=Math.round(u[t+1]*b.fftSize/v.sampleRate))-o>1?f+=Math.round((i-o)/2):i-o==1&&m.length>0&&n==m[m.length-1].dataIdx&&(a=!0,f+=Math.round((i-o)/2))),m.push({posX:t*(g+x),dataIdx:n,endIdx:f-n>0?f:0,average:a,peak:0,hold:0,accel:0}),C.fillRect(m[m.length-1].posX-w.spaceH/2,0,w.spaceH,y.height)})}if(i>0)for(C.fillRect(m[m.length-1].posX+g-w.spaceH/2+(i<8?2:1),0,w.spaceH,y.height),e=w.ledHeight;e<y.height;e+=w.ledHeight+w.spaceV)C.fillRect(0,e,y.width,w.spaceV);(p=[{freq:16},{freq:31},{freq:63},{freq:125},{freq:250},{freq:500},{freq:1e3},{freq:2e3},{freq:4e3},{freq:8e3},{freq:16e3}]).forEach(e=>{e.posX=r*(Math.log10(e.freq)-n),e.freq>=1e3&&(e.freq=e.freq/1e3+"k")})}function X(){var e,t,n,o,a,h,u=l&&i>0;for(E.fillStyle=d?u?"#111":P[r].bgColor:"#000",E.fillRect(0,0,y.width,y.height),b.getByteFrequencyData(x),n=m.length,e=0;e<n;e++){if(0==(o=m[e]).endIdx)a=x[o.dataIdx];else if(a=0,o.average){for(t=o.dataIdx;t<=o.endIdx;t++)a+=x[t];a/=o.endIdx-o.dataIdx+1}else for(t=o.dataIdx;t<=o.endIdx;t++)a=Math.max(a,x[t]);(a=u?(a/255*w.nLeds|0)*(w.ledHeight+w.spaceV):a/255*y.height|0)>=o.peak&&(o.peak=a,o.hold=30,o.accel=0),E.fillStyle=P[r].gradient,u?E.fillRect(o.posX+w.spaceH/2,y.height,g,-a):E.fillRect(o.posX,y.height,g,-a),o.peak>0&&(s&&(u?E.fillRect(o.posX+w.spaceH/2,(w.nLeds-(o.peak/y.height*w.nLeds|0))*(w.ledHeight+w.spaceV),g,w.ledHeight):E.fillRect(o.posX,y.height-o.peak,g,2)),o.hold?o.hold--:(o.accel++,o.peak-=o.accel))}u&&E.drawImage(R,0,0),c&&(h=5*S,_()&&(h*=2),E.fillStyle="#000c",E.fillRect(0,y.height-4*h,y.width,4*h),E.fillStyle="#fff",E.font=2*h+"px sans-serif",E.textAlign="center",p.forEach(e=>E.fillText(e.freq,e.posX,y.height-h))),A++;var v=performance.now(),k=v-H;k>=1e3&&(F=A/(k/1e3),A=0,H=v),f&&(h=20*S,E.font=`bold ${h}px sans-serif`,E.fillStyle="#0f0",E.textAlign="right",E.fillText(F.toFixed(),y.width-h,2*h)),B&&B(y,E,S),I=requestAnimationFrame(X)}function j(){var e;Object.keys(P).forEach(function(t){e=P[t].dir&&"h"==P[t].dir?E.createLinearGradient(0,0,y.width,0):E.createLinearGradient(0,0,0,y.height),P[t].colorStops&&P[t].colorStops.forEach((n,i)=>{"object"==typeof n?e.addColorStop(n.pos,n.color):e.addColorStop(i/(P[t].colorStops.length-1),n)}),P[t].gradient=e})}function D(){S=window.devicePixelRatio,u&&(S/=2),q=Math.max(window.screen.width,window.screen.height)*S,L=Math.min(window.screen.height,window.screen.width)*S,_()?(y.width=q,y.height=L):(y.width=k*S,y.height=M*S),2==S&&window.screen.height<=540&&(S=1),E.fillStyle="#000",E.fillRect(0,0,y.width,y.height),j(),R=y.cloneNode(),(C=R.getContext("2d")).fillStyle="#000",V()}function $(e){var t=z();return void 0===e&&(e=!t),t&&!e?(cancelAnimationFrame(I),I=void 0):!t&&e&&(A=F=0,H=performance.now(),I=requestAnimationFrame(X)),z()}var G=document.getElementById("audio"),N=!0;try{!function(e,t={}){e||(e=document.body);var n,m=window.AudioContext||window.webkitAudioContext;try{v=new m}catch(e){throw"Could not create audio context. Web Audio API not supported?"}b=v.createAnalyser(),t.source&&(n=function(e){var t=v.createMediaElementSource(e);return t.connect(b),t}(t.source)),b.connect(v.destination),T.width=e.clientWidth||T.width,T.height=e.clientHeight||T.height,i=void 0===t.mode?T.mode:Number(t.mode),o=void 0===t.minFreq?T.minFreq:t.minFreq,a=void 0===t.maxFreq?T.maxFreq:t.maxFreq,r=void 0===t.gradient?T.gradient:t.gradient,d=void 0===t.showBgColor?T.showBgColor:t.showBgColor,l=void 0===t.showLeds?T.showLeds:t.showLeds,c=void 0===t.showScale?T.showScale:t.showScale,h=void 0===t.highSens?T.highSens:t.highSens,s=void 0===t.showPeaks?T.showPeaks:t.showPeaks,f=void 0===t.showFPS?T.showFPS:t.showFPS,u=void 0===t.loRes?T.loRes:t.loRes,k=void 0===t.width?T.width:t.width,M=void 0===t.height?T.height:t.height,b.fftSize=void 0===t.fftSize?T.fftSize:t.fftSize,b.smoothingTimeConstant=void 0===t.smoothing?T.smoothing:t.smoothing,x=new Uint8Array(b.frequencyBinCount),"function"==typeof t.drawCallback&&(B=t.drawCallback),O(h),(y=document.createElement("canvas")).style="max-width: 100%;",e.appendChild(y),E=y.getContext("2d",{alpha:!1}),D(),y.addEventListener("fullscreenchange",D),y.addEventListener("webkitfullscreenchange",D),window.addEventListener("resize",()=>{k=t.width||e.clientWidth||T.width,M=t.height||e.clientHeight||T.height,D()}),void 0!==t.start&&!1===t.start||$(!0)}(document.getElementById("container"),{mode:4,source:G,minFreq:30,maxFreq:16e3,showFPS:!0,drawCallback:function(e,t,n){if(!N)return;var i=20*n;_()&&(i*=2);t.font=`${i}px Orbitron,sans-serif`;var o=t.measureText("audioMotion").width/2;t.font=`${i+x[1]/16*n}px Orbitron,sans-serif`,t.fillStyle="#fff8",t.textAlign="center",t.fillText("audioMotion",e.width-o-4*i,2*i)}})}catch(e){document.getElementById("container").innerHTML=`<p>audioMotion failed with error: <em>${e}</em></p>`}var W=v,U=W.createOscillator(),J=W.createGain();U.frequency.setValueAtTime(0,W.currentTime),U.connect(J),U.start(),J.connect(b),document.getElementById("btn_fullscr").addEventListener("click",()=>void(_()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():y.requestFullscreen?y.requestFullscreen():y.webkitRequestFullscreen&&y.webkitRequestFullscreen())),document.getElementById("btn_bgcolor").addEventListener("click",()=>(function(e){return d=void 0===e?!d:e})()),document.getElementById("btn_peaks").addEventListener("click",()=>(function(e){return s=void 0===e?!s:e})()),document.getElementById("btn_leds").addEventListener("click",()=>(function(e){return l=void 0===e?!l:e})()),document.getElementById("btn_scale").addEventListener("click",()=>(function(e){return c=void 0===e?!c:e})()),document.getElementById("btn_lores").addEventListener("click",()=>(function(e){return u=void 0===e?!u:e,D(),u})()),document.getElementById("btn_fps").addEventListener("click",()=>(function(e){return f=void 0===e?!f:e})()),document.getElementById("btn_logo").addEventListener("click",()=>N=!N),document.getElementById("btn_freeze").addEventListener("click",()=>$()),document.getElementById("mode").addEventListener("change",e=>(function(e=T.mode){i=Number(e),V()})(e.target.value)),document.getElementById("gradient").addEventListener("change",e=>(function(e=T.gradient){r=e})(e.target.value)),document.getElementById("range").addEventListener("change",e=>{let t=e.target[e.target.selectedIndex];!function(e=T.minFreq,t=T.maxFreq){o=Math.min(e,t),a=Math.max(e,t),V()}(t.dataset.min,t.dataset.max)}),document.querySelectorAll(".tones").forEach(e=>e.addEventListener("click",e=>{U.type=e.target.dataset.wave,U.frequency.setValueAtTime(e.target.dataset.freq,W.currentTime),J.gain.setValueAtTime(.2,W.currentTime)})),document.getElementById("btn_soundoff").addEventListener("click",()=>J.gain.setValueAtTime(0,W.currentTime)),document.getElementById("uploadFile").addEventListener("change",e=>(function(e){var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=()=>{G.src=t.result,G.play()}})(e.target)),window.addEventListener("click",()=>{"suspended"==v.state&&v.resume()})}]);